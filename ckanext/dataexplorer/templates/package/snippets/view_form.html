{% import 'macros/form.html' as form %}

{% set data = data or {} %}
{% set errors = errors or {} %}

{{ form.errors(error_summary) }}

{{ form.input('title', id='field-title', label=_('Title'), placeholder=_('eg. My View'), value=data.title, error=errors.title, classes=['control-full', 'control-large'], is_required=true) }}
{{ form.markdown('description', id='field-description', label=_('Description'), placeholder=_('eg. Information about my view'), value=data.description, error=errors.description) }}

{# if no tab is activated, at least grid must be activated #}
{% if not (data.grid_tab or data.graph_tab or data.map_tab) %}
  {% set data__grid_tab = True %}
{% else %}
  {% set data__grid_tab = data.grid_tab %}
{% endif %}

{{ form.checkbox('grid_tab', label='Add grid view', id='field-grid_tab', value='show', checked=data__grid_tab, error=errors.grid_tab) }}
{{ form.checkbox('graph_tab', label='Add graph view', id='field-graph_tab', value='show', checked=data.graph_tab, error=errors.graph_tab) }}
{{ form.checkbox('map_tab', label='Add map view', id='field-map_tab', value='show', checked=data.map_tab, error=errors.map_tab) }}

{% block view_form_filters %}
  {% snippet 'package/snippets/view_form_filters.html', resource=resource, resource_view=resource_view %}
{% endblock %}

{# form template is defined in ResouceView extention point #}

{% if form_template %}
  {% include form_template %}
{% endif %}
